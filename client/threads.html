<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Discussions - AlumniConnect</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/social-feed-enhancements.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        (function() {
            const theme = localStorage.getItem('theme');
            if (theme === 'dark-mode') {
                document.documentElement.classList.add('dark-mode');
            }
        })();
    </script>
</head>
<body>
    <header class="main-header">
        <nav class="main-nav container">
            <a href="index.html" class="logo">AlumniConnect</a>
            <ul id="nav-links" class="nav-links"></ul>
        </nav>
    </header>

    <main class="modern-main">
        <!-- Modern Top Bar -->
        <div class="modern-top-bar">
            <div class="container">
                <h1 class="modern-title">
                    <i class="fas fa-comments gradient-icon"></i>
                    Discussions
                </h1>
                <div class="top-actions">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" placeholder="Search discussions..." class="modern-search">
                    </div>
                    <div class="action-buttons">
                        <a href="add-story.html" class="add-story-btn" title="Create a new story">
                            <i class="fas fa-plus-circle"></i>
                            <span>New Story</span>
                        </a>
                        <a href="add-thread.html" class="add-thread-btn" title="Start a new discussion">
                            <i class="fas fa-plus"></i>
                            <span>New Thread</span>
                        </a>
                        <a href="stories.html" class="view-stories-btn" title="View all stories">
                            <i class="fas fa-images"></i>
                            <span>Stories</span>
                        </a>
                    </div>
                    <button class="modern-filter-btn" id="filter-toggle">
                        <i class="fas fa-filter"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Stories-like Trending Topics -->
        <section class="trending-stories">
            <div class="container">
                <div class="stories-scroll">
                    <div class="story-item active" data-category="">
                        <div class="story-ring">
                            <div class="story-avatar">
                                <i class="fas fa-fire"></i>
                            </div>
                        </div>
                        <span>All</span>
                    </div>
                    <div class="story-item" data-category="career">
                        <div class="story-ring">
                            <div class="story-avatar career">
                                <i class="fas fa-briefcase"></i>
                            </div>
                        </div>
                        <span>Career</span>
                    </div>
                    <div class="story-item" data-category="networking">
                        <div class="story-ring">
                            <div class="story-avatar networking">
                                <i class="fas fa-handshake"></i>
                            </div>
                        </div>
                        <span>Network</span>
                    </div>
                    <div class="story-item" data-category="industry">
                        <div class="story-ring">
                            <div class="story-avatar industry">
                                <i class="fas fa-industry"></i>
                            </div>
                        </div>
                        <span>Industry</span>
                    </div>
                    <div class="story-item" data-category="entrepreneurship">
                        <div class="story-ring">
                            <div class="story-avatar startup">
                                <i class="fas fa-rocket"></i>
                            </div>
                        </div>
                        <span>Startup</span>
                    </div>
                    <div class="story-item" data-category="lifestyle">
                        <div class="story-ring">
                            <div class="story-avatar lifestyle">
                                <i class="fas fa-heart"></i>
                            </div>
                        </div>
                        <span>Lifestyle</span>
                    </div>
                    <div class="story-item" data-category="general">
                        <div class="story-ring">
                            <div class="story-avatar general">
                                <i class="fas fa-globe"></i>
                            </div>
                        </div>
                        <span>General</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filter Panel (Hidden by default) -->
        <div class="filter-panel" id="filter-panel">
            <div class="container">
                <div class="filter-content">
                    <div class="filter-group">
                        <label>Sort by</label>
                        <select class="modern-select sort-filter">
                            <option value="latest">Latest First</option>
                            <option value="popular">Most Popular</option>
                            <option value="trending">Trending</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label>Time range</label>
                        <select class="modern-select">
                            <option value="all">All time</option>
                            <option value="today">Today</option>
                            <option value="week">This week</option>
                            <option value="month">This month</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="modern-content">
            <div class="container">
                <div class="content-layout">
                    <!-- Feed Column -->
                    <div class="feed-column">
                        <div id="threads-feed-container" class="modern-feed">
                            <!-- Threads will be loaded here by JavaScript -->
                            <div class="loading-container">
                                <div class="modern-spinner">
                                    <div class="spinner-ring"></div>
                                </div>
                                <p>Loading discussions...</p>
                            </div>
                        </div>

                        <!-- Load More Button -->
                        <div id="load-more-container" class="load-more-container" style="display: none;">
                            <button id="load-more-btn" class="modern-load-more">
                                Load more posts
                            </button>
                        </div>
                    </div>

                    <!-- Modern Sidebar -->
                    <aside class="modern-sidebar">
                        <!-- Quick Stats -->
                        <div class="sidebar-widget stats-widget">
                            <div class="widget-header">
                                <h3>Community Stats</h3>
                            </div>
                            <div class="stats-grid" id="community-stats">
                                <!-- Community stats will be loaded dynamically -->
                                <div class="loading-placeholder">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Loading stats...</span>
                                </div>
                            </div>
                        </div>

                        <!-- Trending Hashtags -->
                        <div class="sidebar-widget">
                            <div class="widget-header">
                                <h3>
                                    <i class="fas fa-hashtag"></i>
                                    Trending
                                </h3>
                            </div>
                            <div class="trending-tags" id="trending-tags">
                                <!-- Trending hashtags will be loaded dynamically -->
                                <div class="loading-placeholder">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Loading trending topics...</span>
                                </div>
                            </div>
                        </div>

                        <!-- Top Contributors -->
                        <div class="sidebar-widget">
                            <div class="widget-header">
                                <h3>
                                    <i class="fas fa-star"></i>
                                    Top Contributors
                                </h3>
                            </div>
                            <div class="contributors-list" id="contributors-list">
                                <!-- Top contributors will be loaded dynamically -->
                                <div class="loading-placeholder">
                                    <i class="fas fa-spinner fa-spin"></i>
                                    <span>Loading contributors...</span>
                                </div>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
        </div>

    </main>
    
    <footer class="main-footer">
        <div class="container">
            <p>&copy; 2025 AlumniConnect. All Rights Reserved.</p>
        </div>
    </footer>

    <!-- Thread Detail Modal -->
    <div id="thread-modal" class="modal">
        <div class="modal-content thread-modal-content">
            <div class="modal-header">
                <button class="back-btn" onclick="closeThreadModal()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h3>Thread Details</h3>
                <span class="close" onclick="closeThreadModal()">&times;</span>
            </div>
            <div id="thread-modal-body" class="modal-body">
                <!-- Thread content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="share-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Share Thread</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <p>Share this thread:</p>
                <div class="share-options">
                    <button class="btn btn-secondary" onclick="copyThreadLink()">
                        <i class="fas fa-link"></i> Copy Link
                    </button>
                    <button class="btn btn-secondary" onclick="shareToMessages()">
                        <i class="fas fa-paper-plane"></i> Send in Message
                    </button>
                </div>
                <input type="text" id="thread-link-input" readonly style="margin-top: 1rem; width: 100%;">
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/story-modal.js"></script>
    <script src="js/threads.js"></script>
</body>
</html>